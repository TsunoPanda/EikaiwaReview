# ç§çš„DMMè‹±ä¼šè©±ãƒ¬ãƒ“ãƒ¥ãƒ¼æ–¹æ³•
1. **DMMè‹±ä¼šè©±ã‚’å—ã‘ã‚‹**
2. **ãƒ¬ãƒƒã‚¹ãƒ³ã®éŸ³å£°ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**
3. **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸéŸ³å£°ã‚’Speak2Text.pyã§ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›**
   
   ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ã‚­ã‚¹ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹
   
   ![Sample Transcription](resource/transcription.png)
4. **éŸ³å£°ã‚’èããªãŒã‚‰ãã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã€‚**
- èª°ãŒã—ã‚ƒã¹ã£ãŸã‹ã®æƒ…å ±
- ()ã®ä¸­ã«ã€æ—¥æœ¬èªã§ã‚‚è‰¯ã„ã®ã§ã€ã©ã®ã‚ˆã†ãªã“ã¨ã‚’è¨€ã„ãŸã‹ã£ãŸã®ã‹ã€‚

  éŸ³å£°ã‚’èã„ã¦ã„ã‚‹ã¨ã€ã€Œã“ã†ã„ã†ã“ã¨ãŒè¨€ã„ãŸã‹ã£ãŸã®ã«ã†ã¾ãè¨€ãˆãªã‹ã£ãŸã€‚ã€ã€Œã†ã¾ãè¡¨ç¾ã™ã‚‹è¨€ã„æ–¹ãŒã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§ä¼ãˆãŸã‹ã£ãŸã“ã¨ã¨è‹¥å¹²æ„å‘³ãŒé•ã£ã¦ã—ã¾ã£ãŸã€‚ã€ãªã©ãŒã‚ã‚‹ã®ã§ã€æœ¬æ¥ä¼ãˆãŸã‹ã£ãŸå†…å®¹ã‚’æ—¥æœ¬èªã§ã‚‚è‰¯ã„ã‹ã‚‰è¨˜å…¥ã™ã‚‹ã€‚
  
  ä¸Šè¨˜ã‚’è¨˜å…¥ã—ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚
  <br>
  ![Sample text](resource/text.png)

5. **ChatGPTãªã©ã‚’ä½¿ã„ä¼šè©±ãƒ†ã‚­ã‚¹ãƒˆã‚’æ ¡æ­£ã™ã‚‹**
<br>EikaiwaPrompt.txtå†…ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ç·¨é›†ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã®è‹±èªã‚’ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚ã“ã®æ™‚()å†…ã«è¨˜å…¥ã—ãŸæ—¥æœ¬èªã¯è‹±èªã«åæ˜ ã•ã‚Œã‚‹ã€‚

6. **ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚’Text2Movie.pyã§å‹•ç”»ã‚’ä½œæˆã€‚(æœ‰æ–™)**
<br>ã“ã‚Œã¯OpenAIã®ãƒ†ã‚­ã‚¹ãƒˆèª­ã¿ä¸Šã’APIã‚’ä½¿ç”¨ã™ã‚‹ã®ã§æœ‰æ–™ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆã¨ãã®éŸ³å£°+ç„¡éŸ³æ™‚é–“ã®å‹•ç”»ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

7. ãã®å‹•ç”»ã‚’ä½¿ç”¨ã—ã¦ã€ã‚·ãƒ£ãƒ‰ãƒ¼ã‚¤ãƒ³ã‚°ã€ãƒªãƒ”ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ç¹°ã‚Šè¿”ã™ã€‚
<br>éŸ³å£°æ™‚é–“ã§ã‚·ãƒ£ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚°ã€ç„¡éŸ³æ™‚é–“ã«ãƒªãƒ”ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒã§ãã¾ã™ã€‚


ä»¥ä¸‹ã¯Text2Movieã¨Speak2Textã®èª¬æ˜ã§ã™ã€‚

# EikaiwaReview

A Python toolkit for processing English conversation text and creating review materials with AI-generated audio and video content.

## Overview

EikaiwaReview consists of two main tools:

1. **Text2Movie.py** - Converts text conversations into video clips with AI-generated speech
2. **Speak2Text.py** - Transcribes audio files to text using Whisper ASR

## Features

### Text2Movie.py
- ğŸ¯ **Speaker-specific processing** - Extract and process content from specific speakers
- ğŸ™ï¸ **AI-generated speech** - Uses OpenAI's TTS API with multiple voice options
- ğŸ¬ **Video generation** - Creates video clips with text overlay and synchronized audio
- âš¡ **Batch processing** - Processes multiple sentences and combines them into a single video
- ğŸ”§ **Configurable settings** - Customizable video dimensions, fonts, and processing parameters
- ğŸ§ª **Test mode** - Generate synthetic audio for testing without API costs

### Speak2Text.py
- ğŸ¤ **Audio transcription** - Convert audio files to text using OpenAI's Whisper
- ğŸŒ **Multiple model sizes** - Support for tiny, base, small, medium, and large models
- âš¡ **Fast processing** - Efficient transcription with timing information
- ğŸ“ **Text output** - Saves transcription to file

## Installation

### Prerequisites
- Python 3.8+
- FFmpeg (for audio/video processing)

### Dependencies

Install required packages:

```bash
pip install openai pillow numpy moviepy textwrap whisper-openai
```

### Environment Setup

Set your OpenAI API key as an environment variable:

```bash
# Windows
set OPENAI_API_KEY=your_api_key_here

# Linux/Mac
export OPENAI_API_KEY=your_api_key_here
```

## Usage

### Text2Movie.py

Convert conversation text to video clips:

```bash
python Text2Movie.py input.txt [suffix]
```

**Parameters:**
- `input.txt` - Input text file with conversation format
- `suffix` (optional) - Prefix for output files

**Input Format:**
```
[Me]: This is my part of the conversation.
[Teacher]: This is the teacher's response.
[Me]: Another sentence from me.
```

**Output:**
- Individual video clips for each sentence
- Combined video file (`{suffix}ALL.mp4`)
- All files saved in `output/` folder

### Speak2Text.py

Transcribe audio files to text:

```bash
python Speak2Text.py audio.wav base
```

**Parameters:**
- `audio.wav` - Path to audio file
- `base` - Whisper model size (tiny, base, small, medium, large)

**Output:**
- `transcription.txt` - Transcribed text file

## Configuration

### Text2Movie Configuration

You can customize the processing by modifying the `Config` class:

```python
config = Config(
  process_speaker="[Me]",      # Speaker to process
  video_width=800,             # Video width
  video_height=600,            # Video height
  font_size=40,                # Text font size
  text_wrap_width=50,          # Characters per line
  min_sentence_length=20,      # Minimum sentence length
  fps=30                       # Video frame rate
)

processor = Text2MovieProcessor(config)
```

### Available Voices

The system randomly selects from these OpenAI TTS voices:
- alloy
- echo
- fable
- onyx
- nova
- shimmer

## Testing

### Test Mode

Enable test mode to generate synthetic audio without using the OpenAI API:

```python
# In Text2Movie.py, set:
TEST_MODE = True
```

This generates a simple sine wave audio for testing purposes.

## File Structure

```
EikaiwaReview/
â”œâ”€â”€ Text2Movie.py           # Main text-to-video processor
â”œâ”€â”€ Speak2Text.py          # Audio transcription tool
â”œâ”€â”€ readme.md              # This file
â”œâ”€â”€ EikaiwaPrompt.txt      # Sample prompt file
â””â”€â”€ output/                # Generated video files (created automatically)
    â”œâ”€â”€ part_0.mp4
    â”œâ”€â”€ part_1.mp4
    â””â”€â”€ ALL.mp4
```

## Examples

### Example 1: Basic Usage

Input file (`conversation.txt`):
```
[Me]: I want to practice my English speaking skills.
[Teacher]: That's great! Let's start with some basic conversations.
[Me]: How should I begin practicing?
```

Command:
```bash
python Text2Movie.py conversation.txt practice_
```

Output:
- `practice_part_0.mp4` - "I want to practice my English speaking skills."
- `practice_part_2.mp4` - "How should I begin practicing?"
- `practice_ALL.mp4` - Combined video

### Example 2: Audio Transcription

```bash
python Speak2Text.py recording.wav medium
```

## Troubleshooting

### Common Issues

1. **FFmpeg not found**
   - Install FFmpeg and ensure it's in your PATH
   - Windows: Download from https://ffmpeg.org/
   - Mac: `brew install ffmpeg`
   - Linux: `sudo apt install ffmpeg`

2. **OpenAI API errors**
   - Verify your API key is set correctly
   - Check your OpenAI account has sufficient credits
   - Enable test mode for development

3. **Font issues**
   - The system tries to use Arial font, falls back to default if unavailable
   - On Linux, install: `sudo apt install fonts-liberation`

4. **Memory issues with large files**
   - Use smaller video dimensions
   - Process files in smaller chunks
   - Use smaller Whisper models for transcription

## API Costs

Text2Movie uses OpenAI's TTS API which charges per character:
- Approximately $0.015 per 1K characters
- Use test mode during development to avoid costs

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request
